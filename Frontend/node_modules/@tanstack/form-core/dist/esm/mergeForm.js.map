{"version":3,"file":"mergeForm.js","sources":["../../src/mergeForm.ts"],"sourcesContent":["import type { FormApi } from './FormApi'\nimport type { Validator } from './types'\nimport type { NoInfer } from './util-types'\n\n/**\n * @private\n */\nexport function mutateMergeDeep(target: object, source: object): object {\n  const targetKeys = Object.keys(target)\n  const sourceKeys = Object.keys(source)\n  const keySet = new Set([...targetKeys, ...sourceKeys])\n  for (const key of keySet) {\n    const targetKey = key as never as keyof typeof target\n    const sourceKey = key as never as keyof typeof source\n    if (Array.isArray(target[targetKey]) && Array.isArray(source[sourceKey])) {\n      target[targetKey] = [\n        ...(target[targetKey] as []),\n        ...(source[sourceKey] as []),\n      ] as never\n    } else if (\n      typeof target[targetKey] === 'object' &&\n      typeof source[sourceKey] === 'object'\n    ) {\n      mutateMergeDeep(target[targetKey] as {}, source[sourceKey] as {})\n    } else {\n      // Prevent assigning undefined to target, only if undefined is not explicitly set on source\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (!(sourceKey in source) && source[sourceKey] === undefined) {\n        continue\n      }\n      target[targetKey] = source[sourceKey] as never\n    }\n  }\n  return target\n}\n\nexport function mergeForm<\n  TFormData,\n  TFormValidator extends Validator<TFormData, unknown> | undefined = undefined,\n>(\n  baseForm: FormApi<NoInfer<TFormData>, NoInfer<TFormValidator>>,\n  state: Partial<FormApi<TFormData, TFormValidator>['state']>,\n) {\n  mutateMergeDeep(baseForm.state, state)\n  return baseForm\n}\n"],"names":[],"mappings":"AAOgB,SAAA,gBAAgB,QAAgB,QAAwB;AAChE,QAAA,aAAa,OAAO,KAAK,MAAM;AAC/B,QAAA,aAAa,OAAO,KAAK,MAAM;AAC/B,QAAA,6BAAa,IAAI,CAAC,GAAG,YAAY,GAAG,UAAU,CAAC;AACrD,aAAW,OAAO,QAAQ;AACxB,UAAM,YAAY;AAClB,UAAM,YAAY;AACd,QAAA,MAAM,QAAQ,OAAO,SAAS,CAAC,KAAK,MAAM,QAAQ,OAAO,SAAS,CAAC,GAAG;AACxE,aAAO,SAAS,IAAI;AAAA,QAClB,GAAI,OAAO,SAAS;AAAA,QACpB,GAAI,OAAO,SAAS;AAAA,MAAA;AAAA,IACtB,WAEA,OAAO,OAAO,SAAS,MAAM,YAC7B,OAAO,OAAO,SAAS,MAAM,UAC7B;AACA,sBAAgB,OAAO,SAAS,GAAS,OAAO,SAAS,CAAO;AAAA,IAAA,OAC3D;AAGL,UAAI,EAAE,aAAa,WAAW,OAAO,SAAS,MAAM,QAAW;AAC7D;AAAA,MACF;AACO,aAAA,SAAS,IAAI,OAAO,SAAS;AAAA,IACtC;AAAA,EACF;AACO,SAAA;AACT;AAEgB,SAAA,UAId,UACA,OACA;AACgB,kBAAA,SAAS,OAAO,KAAK;AAC9B,SAAA;AACT;"}